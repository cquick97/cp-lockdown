<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<title>Ubuntu Lockdown</title>
</head>

<body>
<h1>Ubuntu</h1>
<div id="toc">
Users and Groups<ul>
<li><a href="#groups">Groups</a><br /></li>
<li><a href="#users">Users</a><br /></li>
<li><a href="#default-groups">Default Groups</a><br /></li>
<li><a href="#default-users">Default Users</a><br /></li>
</ul>
Networking<ul>
<li><a href="#firewall">Firewall</a><br /></li>
<li><a href="#network-connections">Network Connections</a><br /></li>
</ul>
Configuration<ul>
<li><a href="#services">Services</a><br /></li>
<li><a href="#updates">Updates</a><br /></li>
</ul>
References<ul>
<li><a href="#terminal">Terminal</a><br /></li>
</ul>
</div>
<hr>
<h1>Users and Groups</h1>
<hr>
<div id="groups">
<h2>Groups</h2>
<h3>Location</h3>
<ul>
    <li>Open <a href="#terminal">terminal</a></li>
    <li>cat /etc/group</li>
</ul>
<h3>Settings</h3>
<ul>
    <li>Check <a href="#default-groups">Default Groups</a></li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<div id="users">
<h2>Users</h2>
<h3>Location</h3>
<ul>
    <li>Open <a href="#terminal">terminal</a></li>
    <li>cat /etc/passwd</li>
</ul>
<h3>Settings</h3>
<ul>
    <li>Check <a href="#default-users">Default Users</a></li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<div id="default-groups">
<h2>Default Groups</h2>
<p> Note: This could change with each Ubuntu version. Not sure which version the fullowing is from.</p>
<ul>
    <li>root</li>
    <li>daemon</li>
    <li>bin</li>
    <li>sys</li>
    <li>adm</li>
    <li>tty</li>
    <li>disk</li>
    <li>lp</li>
    <li>mail</li>
    <li>news</li>
    <li>uucp</li>
    <li>man</li>
    <li>proxy</li>
    <li>kmem</li>
    <li>dialout</li>
    <li>fax</li>
    <li>voice</li>
    <li>cdrom</li>
    <li>floppy</li>
    <li>tape</li>
    <li>sudo</li>
    <li>audio</li>
    <li>dip</li>
    <li>www-data</li>
    <li>backup</li>
    <li>operator</li>
    <li>list</li>
    <li>irc</li>
    <li>src</li>
    <li>gnats</li>
    <li>shadow</li>
    <li>utmp</li>
    <li>video</li>
    <li>sasl</li>
    <li>plugdev</li>
    <li>staff</li>
    <li>games</li>
    <li>users</li>
    <li>nogroup</li>
    <li>libuuid</li>
    <li>crontab</li>
    <li>syslog</li>
    <li>fuse</li>
    <li>messagebus</li>
    <li>bluetooth</li>
    <li>scanner</li>
    <li>colord</li>
    <li>lpadmin</li>
    <li>ssl-cert</li>
    <li>lightdm</li>
    <li>nopasswdlogin</li>
    <li>netdev</li>
    <li>whoopsie</li>
    <li>mlocate</li>
    <li>ssh</li>
    <li>avahi-autoipd</li>
    <li>avahi</li>
    <li>pulse</li>
    <li>pulse-access</li>
    <li>utempter</li>
    <li>rtkit</li>
    <li>saned</li>
    <li>ubuntu</li>
    <li>sambashare</li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<div id="default-users">
<h2>Default Users</h2>
<ul>
    <li>root</li>
    <li>daemon</li>
    <li>bin</li>
    <li>sys</li>
    <li>sync</li>
    <li>games</li>
    <li>man</li>
    <li>lp</li>
    <li>mail</li>
    <li>news</li>
    <li>uucp</li>
    <li>proxy</li>
    <li>www-data</li>
    <li>backup</li>
    <li>list</li>
    <li>irc</li>
    <li>gnats</li>
    <li>nobody</li>
    <li>libuuid</li>
    <li>syslog</li>
    <li>messagebus</li>
    <li>colord</li>
    <li>lightdm</li>
    <li>whoopsie</li>
    <li>avahi-autoipd</li>
    <li>avahi</li>
    <li>usbmux</li>
    <li>kernoops</li>
    <li>pulse</li>
    <li>rtkit</li>
    <li>speech-dispatcher</li>
    <li>dispatcher</li>
    <li>hplip</li>
    <li>saned</li>
    <li>ubuntu</li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<h1>Networking</h1>
<hr>
<div id="firewall">
<h2>Firewall</h2>
<h3>Check rules</h3>
<p>iptables -nL</p>
<h3>Reset firewall rules</h3>
<p>iptables -F</p>
<p>iptables -X</p>
<h3>Set default rules</h3>
<p>iptables -P INPUT DROP</p>
<p>iptables -A INPUT -i lo -j ACCEPT</p>
<p>iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</p>
<h3>Add rules</h3>
For example, add rule for TCP 22 for remote access
<p>iptables -A INPUT -p tcp --dport 22 -j ACCEPT</p>
<h3>Set default actions</h3>
<p>iptables -P INPUT DROP</p>
<p>iptables -P FORWARD DROP</p>
<p>iptables -P OUTPUT ACCEPT</p>
<h2>Using UFW (Uncomplicated Firewall) </p>
<p>sudo ufw allow 22</p>
<p>sudo ufw default deny</p>
<p>sudo ufw enable</p>
This will simply allow port 22, and deny everything else. A lot simpler than iptables. Although for more complex stuff you might want to use iptables.
<a href="#toc">Table of Contents</a>
</div>
<hr>
<div id="network-connections">
<h2>Network Connections</h2>
<h3>View listening network connections</h3>
<p>netstat -tulpn</p>
<h3>View established network connections</h3>
<p>netstat -tupn</p>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<h1>Configuration</h1>
<hr>
<div id="services">
<h2>Services</h2>
<h3>Location</h3>
<ul>
    <li>Open <a href="#terminal">terminal</a></li>
</ul>
<h3>Settings</h3>
<p>Check status of all services</p>
<ul>
    <li>service --status-all</li>
</ul>
<p>Check status of one service (may not always work)</p>
<ul>
    <li>service [service-name] status</li>
</ul>
<p>Other common service commands</p>
<ul>
    <li>service [service-name] start</li>
    <li>service [service-name] stop</li>
    <li>service [service-name] restart</li>
</ul>
<h3>Disable service autostart</h3>
<p>service [service-name] stop</p>
<p>update-rc.d -f [service] remove</p>
<h3>Common Services</h3>
<p>The following services should be disabled if they are not required</p>
<p>Database<p>
<ul>
    <li>mysqld</li>
    <li>postgres</li>
</ul>
<p>E-mail</p>
<ul>
    <li>dovecot</li>
    <li>exim4</li>
    <li>postfix</li>
</ul>
<p>File Sharing</p>
<ul>
    <li>nfs</li>
    <li>nmbd</li>
    <li>rpc.mountd</li>
    <li>rpc.nfsd</li>
    <li>smbd</li>
    <li>vsftpd</li>
</ul>
<p>Music</p>
<ul>
    <li>mpd</li>
</ul>
<p>Networking</p>
<ul>
    <li>avahi-daemon</li>
    <li>bind</li>
    <li>dnsmasq</li>
    <li>xinetd</li>
    <li>inetd</li>
    <li>sshd</li>
    <li>telnet</li>
</ul>
<p>Printing, Scanning</p>
<ul>
    <li>cupsd</li>
    <li>saned</li>
</ul>
<p>Time</p>
<ul>
    <li>ntpd</li>
</ul>
<p>Scheduled tasks</p>
<ul>
    <li>cron</li>
</ul>
<p>Web Server<p>
<ul>
    <li>apache2</li>
    <li>httpd</li>
    <li>jetty</li>
    <li>nginx</li>
    <li>tomcat</li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<div id="updates">
<h2>Updates</h2>
<ul>
		<li>Check /etc/apt/sources.list to make sure all necessary repos, especially security, are there and correct.</li>
		<li>Check for packages daily via the Ubuntu update manager.</li>
    <li>Open <a href="#terminal">terminal</a></li>
		<li>sudo apt-get update && sudo apt-get dist-upgrade -y</li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
<hr>
<h1>References</h1>
<hr>
<div id="terminal">
<h2>Terminal</h2>
Option 1 (Using Unity desktop, like in 14.04)
<ul>
    <li>Press Ubuntu icon button</li>
    <li>Type '<strong>terminal</strong>', press Enter</li>
</ul>
Option 2 (Using gnome desktop, like 12.04)
<ul>
    <li>Click on <strong>Applications</strong> menu</li>
    <li>Go to <strong>Accessories</strong></li>
    <li>Click on <strong>Terminal</strong></li>
</ul>
<a href="#toc">Table of Contents</a>
</div>
</body>
</html>
